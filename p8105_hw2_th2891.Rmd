---
title: "Homework 2"
output: github_document
---

```{r setup}
library(tidyverse)
library(readxl)
```

# Problem 1

## Reading in Mr. Trash Wheel excel file 
  Importing file
    * specifying range
    * excluding rows with images
  cleaning names
  filter out rows with monthly totals
    * just want dumpster information
  Round sports_balls to an integer

```{r}
trash_df = 
  read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 1, range = "A2:N408") %>%
 janitor::clean_names() %>% 
  drop_na() %>% 
   mutate(
      sports_balls = as.integer(sports_balls))
```


 mutate(sports_balls = as.integer(trash_df$sports_balls))

## Read and clean precipitation data for 2018 & 2019

Importing 2018 and 2019 precipitation sheets

  Cleaning and renaming data 

```{r}
precip_2018_df = 
  read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 5, range = "A2:B15") %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(year = "2018") %>% 
  select(year, everything())
  

precip_2019_df = 
  read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 4,range = "A2:B15") %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(
     year = "2019") %>% 
  select(year, everything())
```



## Joining 2019 and 2018 data
  Using left join
  
```{r}
precip_df = 
  left_join(precip_2018_df, precip_2019_df, by = "month") %>% 
  mutate(
      month = month.name[month])
```



### insert paragraph using in line code
    
# Problem 2 

Importing and cleaning pols-month, unemployment, and snp

 Starting with pols-month
 

```{r}
pols_df = read.csv("./data/fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year","month", "day")) %>%  
  mutate(month = as.numeric(month)) %>% 
  mutate(month = month.name[month]) %>% 
  unite('president', prez_dem,prez_gop, sep = "") %>% 
  mutate(
      president = as.numeric(president)) %>% 
  mutate(president = recode(president, '10' = 'dem', '01' = 'gop')) %>% 
  select(-day)
```

Cleaning snp
* reformatting date
* separating date into day, month, year (removing day)
* recoding month into month names


```{r}
library(lubridate)

snp_df = read.csv("./data/fivethirtyeight_datasets/snp.csv") %>% 
  mutate(date = lubridate::mdy(date)) %>% 
  separate(date, into = c("year", "month", "day")) %>% 
  mutate(month = as.numeric(month)) %>% 
  mutate(month = month.name[month]) %>% 
  select(-day)
```


Tidy unemployment
* cleaning
* switching from wide to long format

```{r}
unemployment_df = read.csv("./data/fivethirtyeight_datasets/unemployment.csv") %>% 
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to="unemp_perc")
```

  
